<div class="container">
  <div class="row flex-column flex-md-row">
    <h4 class="mt-3 .text-primary-emphasis">Cart Items {{cartCount}}</h4>
    <div class="  col-lg-8 col-md-10 order-2 order-md-1  " data-bs-spy='scroll'>
      <div class="overflow-scroll" style="height: 80vh; w">
        {{#each products}}
        <div class="card mt-2 card-sm" style="max-width: 100vw;">
          <div class="row g-0">
            <div class="col-md-3">
              <img src="./product-images/{{this.product._id}}.jpg" class="img-fluid rounded-start" alt="...">
            </div>
            <div class="col-md-8">
              <div class="card-body">
                <h5 class="card-title">{{this.product.Name}}</h5>
                <p class="card-text fs-6">{{this.product.description}}</p>

                <button class="btn" onclick="changeQuantity('{{this._id}}','{{this.product._id}}',-1)">-</button>
                <span id="{{this.product._id}}">{{this.quantity}}</span>
                <button onclick="changeQuantity('{{this._id}}','{{this.product._id}}',1)" class="btn">+</button>
                <a class="btn btn-danger btn-sm" href=""> remove</a>
              </div>
            </div>
          </div>
        </div>
        {{/each}}
      </div>
    </div>

    {{! -- summary --}}

    <div class=" col p-0  col-lg-4 col-md-10 order-1 order-md-2 ">
      <div class="m-0 mt-lg-2 mt-md-2  rounded-3 border ps-0 p-3 ">
        <div class="container">
          <h4> Subtotal</h4>
          <table class="table">
            <thead>
              <tr>
                <th scope="col">
                  <p class="fw-normal mb-0">Item</p>
                </th>
                <th scope="col">
                  <p class="fw-normal mb-0">Quantity</p>
                </th>
                <th scope="col">
                  <p class="fw-normal mb-0">Price</p>
                </th>
                <th scope="col">
                  <p class="fw-normal mb-0">Total</p>
                </th>
              </tr>
            </thead>
            <tbody>
              {{#each products}}
              <tr>
                <td>{{this.Name}}</td>
                <td>{{this.Qty}}Qty</td>
                <td>{{this.Price}}</td>
                <td>$40.00</td>
              </tr>
              {{/each}}
            </tbody>
          </table>
          <h6>Your Cart Summary : $55.00</h6>
          <div class="row ">
            <div class="d-grid mt-3">
              <button class="btn btn-success btn-sm" data-bs-target="#exampleModalToggle"
                data-bs-toggle="modal">Checkout</button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>



<style>
  ::-webkit-scrollbar {
    width: 10px;
  }
</style>

<script>
  function changeQuantity(cartId, proId, count) {
    let quantity = parseInt(document.getElementById(proId).innerHTML)
    count = parseInt(count)
    $.ajax({
      url: '/change-product-quantity',
      data: {
        cart: cartId,
        product: proId,
        count: count,
        quantity: quantity
      },
      method: 'post',
      success: (response) => {
        if (response.removeProduct) {
          $('#example').modal('show');
          alert('product removed from cart')
          location.reload()
        } else {
          document.getElementById(proId).innerHTML = quantity + count
        }
      }
    })
  }
</script>

{{!-- modal checkout  --}}

<div class="modal fade modal-fullscreen-md-down" id="exampleModalToggle" aria-hidden="true"
  aria-labelledby="exampleModalToggleLabel" tabindex="-1">
  <div class="modal-dialog modal-dialog-scrollable">
    <div class="modal-content">
      <div class="modal-header">
        <h1 class="modal-title fs-5" id="exampleModalToggleLabel">Checkout</h1>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <h6>Delivery address</h6>
        <div class="  " data-bs-spy='scroll'>
          <div class="overflow-scroll" style="height: 50vh; w">
            <div class="form-check">
              <input class="form-check-input" type="radio" name="exampleRadios" id="exampleRadios1" value="option1"
                checked>
              <label class="form-check-label" for="exampleRadios1">
                <div class="card mb-2">
                  <div class="card-header d-flex">
                    <div class=" p-0 flex-grow-1">ANJITH B</div>
                    <a class=" p-0">edit</a>
                  </div>
                  <div class="card-body pt-1">
                    <h6 class="card-title">Sagar 138(1)</h6>
                    <p class="card-text">Sagara 139 (1)
                      Pathiripally, Kudappanakunnu P O
                      THIRUVANANTHAPURAM, KERALA 695043</p>
                  </div>
                </div>
              </label>
            </div>
            <div class="d-grid col-6 mx-4 w-100 ">
              <button class="btn btn-secondary btn-sm " data-bs-target="#exampleModalToggle2" data-bs-toggle="modal">Add
                New Address</button>
            </div>
          </div>
        </div>
      </div>
      <div class="modal-footer ">
        <div class="container text-center">
          <div class="row">
            <div class="col order-last p-0">
              <button class="btn btn-success w-100 col-6" data-bs-target="#exampleModalToggle2" data-bs-toggle="modal">
                Pay online
              </button>
            </div>
            <div class="col order-first ">
              <button class="btn btn-info w-100 col-6" data-bs-target="#exampleModalToggle2" data-bs-toggle="modal">
                Cash on delivery</button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>


{{!-- modal add new address  --}}

<div class="modal fade" id="exampleModalToggle2" aria-hidden="true" aria-labelledby="exampleModalToggleLabel2"
  tabindex="-1">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content">
      <div class="modal-header">
        <h1 class="modal-title fs-5" id="exampleModalToggleLabel2">Add a new address</h1>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        {{!-- <label for="inputPassword5" class="form-label">Password</label> --}}
        <div class="input-group py-2">
          <input type="text" name="name" placeholder="Frist name" aria-label="First name" class="form-control">
          <input type="text" name="fname" placeholder="Last name" aria-label="Last name" class="form-control">
        </div>
        <input type="text" name="contact" class="form-control" placeholder="Phone No">
        <div class="input-group py-2">
          <input type="text" name="name" placeholder="Flat, House no., Company, Apartment" aria-label="First name" class="form-control">
          <input type="text" name="fname" placeholder="PostCode" aria-label="Last name" class="form-control">
        </div>
        <input type="text" name="name" class="form-control" placeholder="Area, Street, Sector, Village">
        <input type="text" name="name" class="form-control" placeholder="Landmark">  

      </div>
      <div class="modal-footer">
        <button class="btn btn-primary" data-bs-target="#exampleModalToggle" data-bs-toggle="modal">Back to
          first</button>
      </div>
    </div>
  </div>
</div>
<button class="btn btn-primary">Open first modal</button>


<style>
  a {
    text-decoration: none;
  }
</style>